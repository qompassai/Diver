-- /qompassai/Diver/lua/config/core/filetype.lua
-- Qompass AI Diver Core FileType Config
-- Copyright (C) 2025 Qompass AI, All rights reserved
-- ---------------------------------------------------
vim.filetype.add({
  extension = {
    agda = 'agda',
    ['lagda.md'] = 'agda',
    ['lagda.typ'] = 'agda',
    antlers = 'antlers',
    blade = 'blade',
    bri = 'brioche',
    brioche = 'brioche',
    c = 'c',
    cairo = 'cairo',
    cbl = 'cobol',
    CBL = 'cobol',
    CBLLE = 'cobol',
    cc = 'cpp',
    cjs = 'javascript',
    clar = 'clar',
    clarity = 'clarity',
    ['cmake.in'] = 'cmake',
    cobol = 'cobol',
    comp = 'glsl',
    cpp = 'cpp',
    cpy = 'cobol',
    CPY = 'cobol',
    cr = 'crystal',
    cxx = 'cpp',
    cypher = 'cypher',
    device = 'systemd',
    edge = 'edge',
    ejs = 'ejs',
    erb = 'eruby',
    frag = 'glsl',
    geom = 'glsl',
    gohtmltmpl = 'gohtmltmpl',
    h = 'cpp',
    handlebars = 'handlebars',
    hbs = 'html.handlebars',
    hcl = 'hcl',
    hh = 'cpp',
    hpp = 'cpp',
    hxx = 'cpp',
    ipynb = 'json',
    j2 = 'jinja',
    jinja2 = 'jinja',
    js = 'javascript',
    jsx = 'javascriptreact',
    leaf = 'leaf',
    lua = 'lua',
    m = 'objc',
    mm = 'objc',
    mdx = 'mdx',
    mjs = 'javascript',
    mojo = 'mojo',
    mount = 'systemd',
    ['ðŸ”¥'] = 'mojo',
    njk = 'njk',
    nspawn = 'systemd',
    nunjucks = 'nunjucks',
    pgsql = 'pgsql',
    psql = 'pgsql',
    razor = 'razor',
    rockspec = 'lua',
    rst = 'rst',
    schelp = 'scdoc',
    service = 'systemd',
    slim = 'slim',
    snippets = 'snippets',
    sugarss = 'sugarss',
    svh = 'systemverilog',
    tesc = 'glsl',
    tese = 'glsl',
    timer = 'systemd',
    tf = 'terraform',
    tfvars = 'terraform',
    ts = 'typescript',
    tsx = 'typescriptreact',
    v = 'verilog',
    verilog = 'verilog',
    vh = 'verilog',
    yaml = 'yaml',
    yml = 'yaml',
    ['yaml.ansible'] = 'yaml.ansible',
    ['yml.ansible'] = 'yaml.ansible',
    ziggy = 'ziggy',
    ['ziggy-schema'] = 'ziggy_schema',
    zine = 'html',
    zir = 'zir',
  },
  filename = {
    ['ansible.cfg'] = 'ansible',
    ['.bashrc'] = 'bash',
    brioche = 'brioche',
    ['build.zig'] = 'zig',
    ['build.zig.zon'] = 'zon',
    Cairo = 'cairo',
    ['CMakePresets.json'] = 'cmake',
    ['CMakeUserPresets.json'] = 'cmake',
    Crystal = 'crystal',
    ['Dockerfile'] = 'dockerfile',
    ['Containerfile'] = 'dockerfile',
    ['compose.yml'] = 'yaml.docker-compose',
    ['compose.yaml'] = 'yaml.docker-compose',
    ['docker-compose.yml'] = 'yaml.docker-compose',
    ['docker-compose.yaml'] = 'yaml.docker-compose',
    ['.eslintrc.js'] = 'javascript',
    ['.eslintrc.cjs'] = 'javascript',
    ['jupyter_notebook_config.py'] = 'python',
    ['.luacheckrc'] = 'lua',
    ['.luarc.jsonc'] = 'jsonc',
    ['Makefile.local'] = 'make',
    ['make.inc'] = 'make',
    ['pg_dump.sql'] = 'pgsql',
    ['project.bri'] = 'brioche',
    ['stylua.toml'] = 'toml',
    ['tsconfig.json'] = 'jsonc',
  },
  pattern = {
    ['.*'] = function(path, bufnr)
      if path:match('%.%w+$') then
        return nil
      end
      local first = (vim.api.nvim_buf_get_lines(bufnr, 0, 1, false)[1] or '')
      local env_interp = first:match('^#!%s*/usr/bin/env%s+%-S%s+([%w%._%-]+)')
          or first:match('^#!%s*/usr/bin/env%s+([%w%._%-]+)')
      local bin_interp = first:match('^#!%s*/.-/([%w%._%-]+)')
      local interp = env_interp or bin_interp
      if not interp then
        return nil
      end
      local map = {
        bash = 'bash',
        fish = 'fish',
        lua = 'lua',
        node = 'javascript',
        php = 'php',
        python = 'python',
        python3 = 'python',
        ruby = 'ruby',
        sh = 'bash',
        zsh = 'zsh',
      }
      return map[interp]
    end,
    ['.*%.agda'] = 'agda',
    ['.*/.*%.als'] = 'alloy',
    ['.*%.ansible%.ya?ml'] = 'yaml.ansible',
    ['.*%.antlers%.html'] = 'html.antlers',
    ['.*%.blade%.php'] = 'blade',
    ['.*%.cairo'] = 'cairo',
    ['.*%.clar'] = 'clar',
    ['.*%.clarity'] = 'clarity',
    ['.*/cobol_src/.*'] = 'cobol',
    ['Containerfile%..+'] = 'dockerfile',
    ['.*/content/.*%.md'] = 'markdown',
    ['.*/copybooks/.*'] = 'cobol',
    ['.*%.crystal'] = 'crystal',
    ['.*%.d.ts'] = 'typescript',
    ['Dockerfile%..+'] = 'dockerfile',
    ['.*%.edge'] = 'edge',
    ['.*%.eex'] = 'html-eex',
    ['^.*/gitconfig.*$'] = 'gitconfig',
    ['^.*/gitignore.*$'] = 'gitignore',
    ['^.*/gitcommit.*$'] = 'gitcommit',
    ['.*/%.github[%w/]+workflows[%w/]+.*%.ya?ml'] = 'yaml.github',
    ['%.gitlab%-ci%.ya?ml'] = 'yaml.gitlab',
    ['.*%.gjs$'] = 'javascript.glimmer',
    ['.*%.gts$'] = 'typescript.glimmer',
    ['%.hammerspoon/.*%.lua'] = 'lua',
    ['.*/handlers/.*%.ya?ml'] = 'yaml.ansible',
    ['.*%.heex'] = 'html-eex',
    ['.*%.html%.antlers'] = 'html.antlers',
    ['.*/hypr/.+%.conf'] = 'hyprlang',
    ['.*/hyprland%.conf'] = 'hyprlang',
    ['.*%.ipynb'] = 'json',
    ['.*%.lagda%.md'] = 'agda',
    ['.*%.lagda%.typ'] = 'agda',
    ['.*/layouts/.*%.html'] = 'html',
    ['.*%.lua'] = 'lua',
    ['.*/lua/.*%.lua'] = 'lua',
    ['%.pg%.sql$'] = 'pgsql',
    ['.*/playbooks/.*%.ya?ml'] = 'yaml.ansible',
    ['.*%.postcss'] = 'postcss',
    ['%.postgres%.sql$'] = 'pgsql',
    ['.*%.razor'] = 'razor',
    ['.*/roles/.*%.ya?ml'] = 'yaml.ansible',
    ['.*%.sugarss'] = 'sugarss',
    ['.*/tasks/.*%.ya?ml'] = 'yaml.ansible',
    ['.*/templates/.*%.yaml'] = 'helm',
    ['.*/templates/.*%.yml'] = 'helm',
    ['.*/templates/.*%.tpl'] = 'helm',
    ['tsconfig.*%.json'] = 'jsonc',
    ['.*/values.*%.ya?ml'] = 'yaml.helm-values',
    ['.*/%.zig%-cache/.*'] = 'zig',
    ['.*%.zon'] = 'zon',
  },
})